'use strict';

const PQ = require('p-queue').default;
const db = require('./pg');

const MAX_OPERATIONS = 10;
const pq = new PQ({ concurrency: MAX_OPERATIONS });

module.exports = async dbOperation => {
  return pq.add(() => dbOperation(db));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kYi9wZ19yYXRlX2xpbWl0ZWQuanMiXSwibmFtZXMiOlsiUFEiLCJyZXF1aXJlIiwiZGVmYXVsdCIsImRiIiwiTUFYX09QRVJBVElPTlMiLCJwcSIsImNvbmN1cnJlbmN5IiwibW9kdWxlIiwiZXhwb3J0cyIsImRiT3BlcmF0aW9uIiwiYWRkIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJDLE9BQTlCO0FBQ0EsTUFBTUMsRUFBRSxHQUFHRixPQUFPLENBQUMsTUFBRCxDQUFsQjs7QUFFQSxNQUFNRyxjQUFjLEdBQUcsRUFBdkI7QUFDQSxNQUFNQyxFQUFFLEdBQUcsSUFBSUwsRUFBSixDQUFPLEVBQUVNLFdBQVcsRUFBRUYsY0FBZixFQUFQLENBQVg7O0FBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixNQUFPQyxXQUFQLElBQXVCO0FBQ3RDLFNBQU9KLEVBQUUsQ0FBQ0ssR0FBSCxDQUFPLE1BQU1ELFdBQVcsQ0FBQ04sRUFBRCxDQUF4QixDQUFQO0FBQ0QsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBQUSA9IHJlcXVpcmUoJ3AtcXVldWUnKS5kZWZhdWx0XG5jb25zdCBkYiA9IHJlcXVpcmUoJy4vcGcnKVxuXG5jb25zdCBNQVhfT1BFUkFUSU9OUyA9IDEwXG5jb25zdCBwcSA9IG5ldyBQUSh7IGNvbmN1cnJlbmN5OiBNQVhfT1BFUkFUSU9OUyB9KVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChkYk9wZXJhdGlvbikgPT4ge1xuICByZXR1cm4gcHEuYWRkKCgpID0+IGRiT3BlcmF0aW9uKGRiKSlcbn1cbiJdfQ==