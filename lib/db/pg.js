'use strict';

const knex = require('knex');
const pg = require('pg');
const PG_DECIMAL_OID = 1700;
const PG_BIGINT_OID = 20;

pg.types.setTypeParser(PG_DECIMAL_OID, parseFloat);
pg.types.setTypeParser(PG_BIGINT_OID, 'text', parseInt);

// TODO: Extract?
const { PSQL_CONNECTION_DTC } = process.env;

const db = knex({
  client: 'pg',
  acquireConnectionTimeout: 10 * 1000,
  connection: PSQL_CONNECTION_DTC,
  pool: {
    min: 1,
    max: 10 } });



module.exports = db;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kYi9wZy5qcyJdLCJuYW1lcyI6WyJrbmV4IiwicmVxdWlyZSIsInBnIiwiUEdfREVDSU1BTF9PSUQiLCJQR19CSUdJTlRfT0lEIiwidHlwZXMiLCJzZXRUeXBlUGFyc2VyIiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiUFNRTF9DT05ORUNUSU9OX0RUQyIsInByb2Nlc3MiLCJlbnYiLCJkYiIsImNsaWVudCIsImFjcXVpcmVDb25uZWN0aW9uVGltZW91dCIsImNvbm5lY3Rpb24iLCJwb29sIiwibWluIiwibWF4IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFwQjtBQUNBLE1BQU1DLEVBQUUsR0FBR0QsT0FBTyxDQUFDLElBQUQsQ0FBbEI7QUFDQSxNQUFNRSxjQUFjLEdBQUcsSUFBdkI7QUFDQSxNQUFNQyxhQUFhLEdBQUcsRUFBdEI7O0FBRUFGLEVBQUUsQ0FBQ0csS0FBSCxDQUFTQyxhQUFULENBQXVCSCxjQUF2QixFQUF1Q0ksVUFBdkM7QUFDQUwsRUFBRSxDQUFDRyxLQUFILENBQVNDLGFBQVQsQ0FBdUJGLGFBQXZCLEVBQXNDLE1BQXRDLEVBQThDSSxRQUE5Qzs7QUFFQTtBQUNBLE1BQU0sRUFBRUMsbUJBQUYsS0FBMEJDLE9BQU8sQ0FBQ0MsR0FBeEM7O0FBRUEsTUFBTUMsRUFBRSxHQUFHWixJQUFJLENBQUM7QUFDZGEsRUFBQUEsTUFBTSxFQUFFLElBRE07QUFFZEMsRUFBQUEsd0JBQXdCLEVBQUUsS0FBSyxJQUZqQjtBQUdkQyxFQUFBQSxVQUFVLEVBQUVOLG1CQUhFO0FBSWRPLEVBQUFBLElBQUksRUFBRTtBQUNKQyxJQUFBQSxHQUFHLEVBQUUsQ0FERDtBQUVKQyxJQUFBQSxHQUFHLEVBQUUsRUFGRCxFQUpRLEVBQUQsQ0FBZjs7OztBQVVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJSLEVBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGtuZXggPSByZXF1aXJlKCdrbmV4JylcbmNvbnN0IHBnID0gcmVxdWlyZSgncGcnKVxuY29uc3QgUEdfREVDSU1BTF9PSUQgPSAxNzAwXG5jb25zdCBQR19CSUdJTlRfT0lEID0gMjBcblxucGcudHlwZXMuc2V0VHlwZVBhcnNlcihQR19ERUNJTUFMX09JRCwgcGFyc2VGbG9hdClcbnBnLnR5cGVzLnNldFR5cGVQYXJzZXIoUEdfQklHSU5UX09JRCwgJ3RleHQnLCBwYXJzZUludClcblxuLy8gVE9ETzogRXh0cmFjdD9cbmNvbnN0IHsgUFNRTF9DT05ORUNUSU9OX0RUQyB9ID0gcHJvY2Vzcy5lbnZcblxuY29uc3QgZGIgPSBrbmV4KHtcbiAgY2xpZW50OiAncGcnLFxuICBhY3F1aXJlQ29ubmVjdGlvblRpbWVvdXQ6IDEwICogMTAwMCxcbiAgY29ubmVjdGlvbjogUFNRTF9DT05ORUNUSU9OX0RUQyxcbiAgcG9vbDoge1xuICAgIG1pbjogMSxcbiAgICBtYXg6IDEwXG4gIH1cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gZGJcbiJdfQ==