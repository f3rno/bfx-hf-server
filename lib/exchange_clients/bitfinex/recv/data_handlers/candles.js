'use strict';

const _last = require('lodash/last');
const _isArray = require('lodash/isArray');
const candleTransformer = require('../../transformers/candle');

module.exports = (exa, msg, channel) => {
  if (_isArray(_last(msg)[0])) {
    return [candleTransformer(_last(_last(msg)))];
    // return _last(msg).map(candleTransformer)
  }

  return [candleTransformer(_last(msg))];
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9leGNoYW5nZV9jbGllbnRzL2JpdGZpbmV4L3JlY3YvZGF0YV9oYW5kbGVycy9jYW5kbGVzLmpzIl0sIm5hbWVzIjpbIl9sYXN0IiwicmVxdWlyZSIsIl9pc0FycmF5IiwiY2FuZGxlVHJhbnNmb3JtZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiZXhhIiwibXNnIiwiY2hhbm5lbCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUFyQjtBQUNBLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQXhCO0FBQ0EsTUFBTUUsaUJBQWlCLEdBQUdGLE9BQU8sQ0FBQywyQkFBRCxDQUFqQzs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxPQUFYLEtBQXVCO0FBQ3RDLE1BQUlOLFFBQVEsQ0FBQ0YsS0FBSyxDQUFDTyxHQUFELENBQUwsQ0FBVyxDQUFYLENBQUQsQ0FBWixFQUE2QjtBQUMzQixXQUFPLENBQUNKLGlCQUFpQixDQUFDSCxLQUFLLENBQUNBLEtBQUssQ0FBQ08sR0FBRCxDQUFOLENBQU4sQ0FBbEIsQ0FBUDtBQUNBO0FBQ0Q7O0FBRUQsU0FBTyxDQUFDSixpQkFBaUIsQ0FBQ0gsS0FBSyxDQUFDTyxHQUFELENBQU4sQ0FBbEIsQ0FBUDtBQUNELENBUEQiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgX2xhc3QgPSByZXF1aXJlKCdsb2Rhc2gvbGFzdCcpXG5jb25zdCBfaXNBcnJheSA9IHJlcXVpcmUoJ2xvZGFzaC9pc0FycmF5JylcbmNvbnN0IGNhbmRsZVRyYW5zZm9ybWVyID0gcmVxdWlyZSgnLi4vLi4vdHJhbnNmb3JtZXJzL2NhbmRsZScpXG5cbm1vZHVsZS5leHBvcnRzID0gKGV4YSwgbXNnLCBjaGFubmVsKSA9PiB7XG4gIGlmIChfaXNBcnJheShfbGFzdChtc2cpWzBdKSkge1xuICAgIHJldHVybiBbY2FuZGxlVHJhbnNmb3JtZXIoX2xhc3QoX2xhc3QobXNnKSkpXVxuICAgIC8vIHJldHVybiBfbGFzdChtc2cpLm1hcChjYW5kbGVUcmFuc2Zvcm1lcilcbiAgfVxuXG4gIHJldHVybiBbY2FuZGxlVHJhbnNmb3JtZXIoX2xhc3QobXNnKSldXG59XG4iXX0=