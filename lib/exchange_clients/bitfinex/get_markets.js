'use strict';

const _uniq = require('lodash/uniq');
const _flatten = require('lodash/flatten');
const { RESTv2 } = require('bfx-api-node-rest');
const symbolTransformer = require('./transformers/symbol');
const rest = new RESTv2();

module.exports = () => {
  return rest.conf([
  'pub:list:pair:exchange',
  'pub:list:pair:margin',
  'pub:list:pair:futures']).
  then(res => {
    const symbols = _uniq(_flatten(_flatten(res)));
    // @ts-ignore
    return symbols.map(sym => symbolTransformer(res, sym));
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9leGNoYW5nZV9jbGllbnRzL2JpdGZpbmV4L2dldF9tYXJrZXRzLmpzIl0sIm5hbWVzIjpbIl91bmlxIiwicmVxdWlyZSIsIl9mbGF0dGVuIiwiUkVTVHYyIiwic3ltYm9sVHJhbnNmb3JtZXIiLCJyZXN0IiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbmYiLCJ0aGVuIiwicmVzIiwic3ltYm9scyIsIm1hcCIsInN5bSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUFyQjtBQUNBLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENBQXhCO0FBQ0EsTUFBTSxFQUFFRSxNQUFGLEtBQWFGLE9BQU8sQ0FBQyxtQkFBRCxDQUExQjtBQUNBLE1BQU1HLGlCQUFpQixHQUFHSCxPQUFPLENBQUMsdUJBQUQsQ0FBakM7QUFDQSxNQUFNSSxJQUFJLEdBQUcsSUFBSUYsTUFBSixFQUFiOztBQUVBRyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsTUFBTTtBQUNyQixTQUFPRixJQUFJLENBQUNHLElBQUwsQ0FBVTtBQUNmLDBCQURlO0FBRWYsd0JBRmU7QUFHZix5QkFIZSxDQUFWO0FBSUpDLEVBQUFBLElBSkksQ0FJQ0MsR0FBRyxJQUFJO0FBQ2IsVUFBTUMsT0FBTyxHQUFHWCxLQUFLLENBQUNFLFFBQVEsQ0FBQ0EsUUFBUSxDQUFDUSxHQUFELENBQVQsQ0FBVCxDQUFyQjtBQUNBO0FBQ0EsV0FBT0MsT0FBTyxDQUFDQyxHQUFSLENBQWFDLEdBQUQsSUFBU1QsaUJBQWlCLENBQUNNLEdBQUQsRUFBTUcsR0FBTixDQUF0QyxDQUFQO0FBQ0QsR0FSTSxDQUFQO0FBU0QsQ0FWRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBfdW5pcSA9IHJlcXVpcmUoJ2xvZGFzaC91bmlxJylcbmNvbnN0IF9mbGF0dGVuID0gcmVxdWlyZSgnbG9kYXNoL2ZsYXR0ZW4nKVxuY29uc3QgeyBSRVNUdjIgfSA9IHJlcXVpcmUoJ2JmeC1hcGktbm9kZS1yZXN0JylcbmNvbnN0IHN5bWJvbFRyYW5zZm9ybWVyID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1lcnMvc3ltYm9sJylcbmNvbnN0IHJlc3QgPSBuZXcgUkVTVHYyKClcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIHJldHVybiByZXN0LmNvbmYoW1xuICAgICdwdWI6bGlzdDpwYWlyOmV4Y2hhbmdlJyxcbiAgICAncHViOmxpc3Q6cGFpcjptYXJnaW4nLFxuICAgICdwdWI6bGlzdDpwYWlyOmZ1dHVyZXMnXG4gIF0pLnRoZW4ocmVzID0+IHtcbiAgICBjb25zdCBzeW1ib2xzID0gX3VuaXEoX2ZsYXR0ZW4oX2ZsYXR0ZW4ocmVzKSkpXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiBzeW1ib2xzLm1hcCgoc3ltKSA9PiBzeW1ib2xUcmFuc2Zvcm1lcihyZXMsIHN5bSkpXG4gIH0pXG59XG4iXX0=