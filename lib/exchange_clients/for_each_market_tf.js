'use strict';

const PI = require('p-iteration');

module.exports = async (db, EXA, cb) => {
  const { Market } = db;
  const markets = await Market.find([['exchange', '=', EXA.id]]);
  const tfs = EXA.getCandleTimeFrames();

  await PI.forEach(markets, async market => {
    await PI.forEach(tfs, async tf => {
      return cb(market, tf);
    });
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leGNoYW5nZV9jbGllbnRzL2Zvcl9lYWNoX21hcmtldF90Zi5qcyJdLCJuYW1lcyI6WyJQSSIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGIiLCJFWEEiLCJjYiIsIk1hcmtldCIsIm1hcmtldHMiLCJmaW5kIiwiaWQiLCJ0ZnMiLCJnZXRDYW5kbGVUaW1lRnJhbWVzIiwiZm9yRWFjaCIsIm1hcmtldCIsInRmIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQWxCOztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsT0FBT0MsRUFBUCxFQUFXQyxHQUFYLEVBQWdCQyxFQUFoQixLQUF1QjtBQUN0QyxRQUFNLEVBQUVDLE1BQUYsS0FBYUgsRUFBbkI7QUFDQSxRQUFNSSxPQUFPLEdBQUcsTUFBTUQsTUFBTSxDQUFDRSxJQUFQLENBQVksQ0FBQyxDQUFDLFVBQUQsRUFBYSxHQUFiLEVBQWtCSixHQUFHLENBQUNLLEVBQXRCLENBQUQsQ0FBWixDQUF0QjtBQUNBLFFBQU1DLEdBQUcsR0FBR04sR0FBRyxDQUFDTyxtQkFBSixFQUFaOztBQUVBLFFBQU1aLEVBQUUsQ0FBQ2EsT0FBSCxDQUFXTCxPQUFYLEVBQW9CLE1BQU9NLE1BQVAsSUFBa0I7QUFDMUMsVUFBTWQsRUFBRSxDQUFDYSxPQUFILENBQVdGLEdBQVgsRUFBZ0IsTUFBT0ksRUFBUCxJQUFjO0FBQ2xDLGFBQU9ULEVBQUUsQ0FBQ1EsTUFBRCxFQUFTQyxFQUFULENBQVQ7QUFDRCxLQUZLLENBQU47QUFHRCxHQUpLLENBQU47QUFLRCxDQVZEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IFBJID0gcmVxdWlyZSgncC1pdGVyYXRpb24nKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChkYiwgRVhBLCBjYikgPT4ge1xuICBjb25zdCB7IE1hcmtldCB9ID0gZGJcbiAgY29uc3QgbWFya2V0cyA9IGF3YWl0IE1hcmtldC5maW5kKFtbJ2V4Y2hhbmdlJywgJz0nLCBFWEEuaWRdXSlcbiAgY29uc3QgdGZzID0gRVhBLmdldENhbmRsZVRpbWVGcmFtZXMoKVxuXG4gIGF3YWl0IFBJLmZvckVhY2gobWFya2V0cywgYXN5bmMgKG1hcmtldCkgPT4ge1xuICAgIGF3YWl0IFBJLmZvckVhY2godGZzLCBhc3luYyAodGYpID0+IHtcbiAgICAgIHJldHVybiBjYihtYXJrZXQsIHRmKVxuICAgIH0pXG4gIH0pXG59XG4iXX0=