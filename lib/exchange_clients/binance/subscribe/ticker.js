'use strict';

const nonce = require('../../../util/nonce');
const chanDataToKey = require('../../../util/chan_data_to_key');

const recvTickerData = require('../recv_data/ticker');

module.exports = (exa, channelData) => {
  const { d, subs, unsubs, client } = exa;
  const key = chanDataToKey(channelData);
  const [, market] = channelData;
  const symbol = market.wsID;
  const chanID = nonce();

  d('subscribing to ticker channel %s', symbol);

  subs[key] = chanID;
  unsubs[key] = client.ws.ticker(
  symbol, ticker => recvTickerData(exa, chanID, ticker));


  return chanID;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9leGNoYW5nZV9jbGllbnRzL2JpbmFuY2Uvc3Vic2NyaWJlL3RpY2tlci5qcyJdLCJuYW1lcyI6WyJub25jZSIsInJlcXVpcmUiLCJjaGFuRGF0YVRvS2V5IiwicmVjdlRpY2tlckRhdGEiLCJtb2R1bGUiLCJleHBvcnRzIiwiZXhhIiwiY2hhbm5lbERhdGEiLCJkIiwic3VicyIsInVuc3VicyIsImNsaWVudCIsImtleSIsIm1hcmtldCIsInN5bWJvbCIsIndzSUQiLCJjaGFuSUQiLCJ3cyIsInRpY2tlciJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBckI7QUFDQSxNQUFNQyxhQUFhLEdBQUdELE9BQU8sQ0FBQyxnQ0FBRCxDQUE3Qjs7QUFFQSxNQUFNRSxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxxQkFBRCxDQUE5Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLENBQUNDLEdBQUQsRUFBTUMsV0FBTixLQUFzQjtBQUNyQyxRQUFNLEVBQUVDLENBQUYsRUFBS0MsSUFBTCxFQUFXQyxNQUFYLEVBQW1CQyxNQUFuQixLQUE4QkwsR0FBcEM7QUFDQSxRQUFNTSxHQUFHLEdBQUdWLGFBQWEsQ0FBQ0ssV0FBRCxDQUF6QjtBQUNBLFFBQU0sR0FBR00sTUFBSCxJQUFhTixXQUFuQjtBQUNBLFFBQU1PLE1BQU0sR0FBR0QsTUFBTSxDQUFDRSxJQUF0QjtBQUNBLFFBQU1DLE1BQU0sR0FBR2hCLEtBQUssRUFBcEI7O0FBRUFRLEVBQUFBLENBQUMsQ0FBQyxrQ0FBRCxFQUFxQ00sTUFBckMsQ0FBRDs7QUFFQUwsRUFBQUEsSUFBSSxDQUFDRyxHQUFELENBQUosR0FBWUksTUFBWjtBQUNBTixFQUFBQSxNQUFNLENBQUNFLEdBQUQsQ0FBTixHQUFjRCxNQUFNLENBQUNNLEVBQVAsQ0FBVUMsTUFBVjtBQUNaSixFQUFBQSxNQURZLEVBQ0hJLE1BQUQsSUFBWWYsY0FBYyxDQUFDRyxHQUFELEVBQU1VLE1BQU4sRUFBY0UsTUFBZCxDQUR0QixDQUFkOzs7QUFJQSxTQUFPRixNQUFQO0FBQ0QsQ0FmRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBub25jZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwvbm9uY2UnKVxuY29uc3QgY2hhbkRhdGFUb0tleSA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWwvY2hhbl9kYXRhX3RvX2tleScpXG5cbmNvbnN0IHJlY3ZUaWNrZXJEYXRhID0gcmVxdWlyZSgnLi4vcmVjdl9kYXRhL3RpY2tlcicpXG5cbm1vZHVsZS5leHBvcnRzID0gKGV4YSwgY2hhbm5lbERhdGEpID0+IHtcbiAgY29uc3QgeyBkLCBzdWJzLCB1bnN1YnMsIGNsaWVudCB9ID0gZXhhXG4gIGNvbnN0IGtleSA9IGNoYW5EYXRhVG9LZXkoY2hhbm5lbERhdGEpXG4gIGNvbnN0IFssIG1hcmtldF0gPSBjaGFubmVsRGF0YVxuICBjb25zdCBzeW1ib2wgPSBtYXJrZXQud3NJRFxuICBjb25zdCBjaGFuSUQgPSBub25jZSgpXG5cbiAgZCgnc3Vic2NyaWJpbmcgdG8gdGlja2VyIGNoYW5uZWwgJXMnLCBzeW1ib2wpXG5cbiAgc3Vic1trZXldID0gY2hhbklEXG4gIHVuc3Vic1trZXldID0gY2xpZW50LndzLnRpY2tlcihcbiAgICBzeW1ib2wsICh0aWNrZXIpID0+IHJlY3ZUaWNrZXJEYXRhKGV4YSwgY2hhbklELCB0aWNrZXIpXG4gIClcblxuICByZXR1cm4gY2hhbklEXG59XG4iXX0=