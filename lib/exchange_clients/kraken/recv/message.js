'use strict';

const _isArray = require('lodash/isArray');
const recvSubscriptionStatus = require('./subscription_status');
const recvChannelData = require('./channel_data');

module.exports = (exa, msgJSON) => {
  const { d } = exa;
  let msg;

  try {
    msg = JSON.parse(msgJSON);
  } catch (e) {
    return d('recv malformed JSON from kraken: %s', msgJSON);
  }

  const { event: e } = msg;

  switch (e) {
    case 'subscriptionStatus':{
        return recvSubscriptionStatus(exa, msg);
      }

    default:{
        if (_isArray(msg)) {
          return recvChannelData(exa, msg);
        }
      }}

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9leGNoYW5nZV9jbGllbnRzL2tyYWtlbi9yZWN2L21lc3NhZ2UuanMiXSwibmFtZXMiOlsiX2lzQXJyYXkiLCJyZXF1aXJlIiwicmVjdlN1YnNjcmlwdGlvblN0YXR1cyIsInJlY3ZDaGFubmVsRGF0YSIsIm1vZHVsZSIsImV4cG9ydHMiLCJleGEiLCJtc2dKU09OIiwiZCIsIm1zZyIsIkpTT04iLCJwYXJzZSIsImUiLCJldmVudCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBeEI7QUFDQSxNQUFNQyxzQkFBc0IsR0FBR0QsT0FBTyxDQUFDLHVCQUFELENBQXRDO0FBQ0EsTUFBTUUsZUFBZSxHQUFHRixPQUFPLENBQUMsZ0JBQUQsQ0FBL0I7O0FBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixDQUFDQyxHQUFELEVBQU1DLE9BQU4sS0FBa0I7QUFDakMsUUFBTSxFQUFFQyxDQUFGLEtBQVFGLEdBQWQ7QUFDQSxNQUFJRyxHQUFKOztBQUVBLE1BQUk7QUFDRkEsSUFBQUEsR0FBRyxHQUFHQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0osT0FBWCxDQUFOO0FBQ0QsR0FGRCxDQUVFLE9BQU9LLENBQVAsRUFBVTtBQUNWLFdBQU9KLENBQUMsQ0FBQyxxQ0FBRCxFQUF3Q0QsT0FBeEMsQ0FBUjtBQUNEOztBQUVELFFBQU0sRUFBRU0sS0FBSyxFQUFFRCxDQUFULEtBQWVILEdBQXJCOztBQUVBLFVBQVFHLENBQVI7QUFDRSxTQUFLLG9CQUFMLENBQTJCO0FBQ3pCLGVBQU9WLHNCQUFzQixDQUFDSSxHQUFELEVBQU1HLEdBQU4sQ0FBN0I7QUFDRDs7QUFFRCxZQUFTO0FBQ1AsWUFBSVQsUUFBUSxDQUFDUyxHQUFELENBQVosRUFBbUI7QUFDakIsaUJBQU9OLGVBQWUsQ0FBQ0csR0FBRCxFQUFNRyxHQUFOLENBQXRCO0FBQ0Q7QUFDRixPQVRIOztBQVdELENBdkJEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IF9pc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoL2lzQXJyYXknKVxuY29uc3QgcmVjdlN1YnNjcmlwdGlvblN0YXR1cyA9IHJlcXVpcmUoJy4vc3Vic2NyaXB0aW9uX3N0YXR1cycpXG5jb25zdCByZWN2Q2hhbm5lbERhdGEgPSByZXF1aXJlKCcuL2NoYW5uZWxfZGF0YScpXG5cbm1vZHVsZS5leHBvcnRzID0gKGV4YSwgbXNnSlNPTikgPT4ge1xuICBjb25zdCB7IGQgfSA9IGV4YVxuICBsZXQgbXNnXG5cbiAgdHJ5IHtcbiAgICBtc2cgPSBKU09OLnBhcnNlKG1zZ0pTT04pXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZCgncmVjdiBtYWxmb3JtZWQgSlNPTiBmcm9tIGtyYWtlbjogJXMnLCBtc2dKU09OKVxuICB9XG5cbiAgY29uc3QgeyBldmVudDogZSB9ID0gbXNnXG5cbiAgc3dpdGNoIChlKSB7XG4gICAgY2FzZSAnc3Vic2NyaXB0aW9uU3RhdHVzJzoge1xuICAgICAgcmV0dXJuIHJlY3ZTdWJzY3JpcHRpb25TdGF0dXMoZXhhLCBtc2cpXG4gICAgfVxuXG4gICAgZGVmYXVsdDoge1xuICAgICAgaWYgKF9pc0FycmF5KG1zZykpIHtcbiAgICAgICAgcmV0dXJuIHJlY3ZDaGFubmVsRGF0YShleGEsIG1zZylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==