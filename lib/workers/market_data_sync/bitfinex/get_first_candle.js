'use strict';

const dbRL = require('../../../db/pg_rate_limited');
const tfToString = require('../../../exchange_clients/bitfinex/util/tf_to_string');

module.exports = async (symbol, tf) => {
  return dbRL(async db => {
    return db(`bitfinex_candles_${tfToString(tf)}`).
    where('symbol', symbol).
    orderBy('mts', 'desc').
    first('*');
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy93b3JrZXJzL21hcmtldF9kYXRhX3N5bmMvYml0ZmluZXgvZ2V0X2ZpcnN0X2NhbmRsZS5qcyJdLCJuYW1lcyI6WyJkYlJMIiwicmVxdWlyZSIsInRmVG9TdHJpbmciLCJtb2R1bGUiLCJleHBvcnRzIiwic3ltYm9sIiwidGYiLCJkYiIsIndoZXJlIiwib3JkZXJCeSIsImZpcnN0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyw2QkFBRCxDQUFwQjtBQUNBLE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHNEQUFELENBQTFCOztBQUVBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsT0FBT0MsTUFBUCxFQUFlQyxFQUFmLEtBQXNCO0FBQ3JDLFNBQU9OLElBQUksQ0FBQyxNQUFPTyxFQUFQLElBQWM7QUFDeEIsV0FBT0EsRUFBRSxDQUFFLG9CQUFtQkwsVUFBVSxDQUFDSSxFQUFELENBQUssRUFBcEMsQ0FBRjtBQUNKRSxJQUFBQSxLQURJLENBQ0UsUUFERixFQUNZSCxNQURaO0FBRUpJLElBQUFBLE9BRkksQ0FFSSxLQUZKLEVBRVcsTUFGWDtBQUdKQyxJQUFBQSxLQUhJLENBR0UsR0FIRixDQUFQO0FBSUQsR0FMVSxDQUFYO0FBTUQsQ0FQRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBkYlJMID0gcmVxdWlyZSgnLi4vLi4vLi4vZGIvcGdfcmF0ZV9saW1pdGVkJylcbmNvbnN0IHRmVG9TdHJpbmcgPSByZXF1aXJlKCcuLi8uLi8uLi9leGNoYW5nZV9jbGllbnRzL2JpdGZpbmV4L3V0aWwvdGZfdG9fc3RyaW5nJylcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoc3ltYm9sLCB0ZikgPT4ge1xuICByZXR1cm4gZGJSTChhc3luYyAoZGIpID0+IHtcbiAgICByZXR1cm4gZGIoYGJpdGZpbmV4X2NhbmRsZXNfJHt0ZlRvU3RyaW5nKHRmKX1gKVxuICAgICAgLndoZXJlKCdzeW1ib2wnLCBzeW1ib2wpXG4gICAgICAub3JkZXJCeSgnbXRzJywgJ2Rlc2MnKVxuICAgICAgLmZpcnN0KCcqJylcbiAgfSlcbn1cbiJdfQ==