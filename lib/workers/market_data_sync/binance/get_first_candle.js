'use strict';

const dbRL = require('../../../db/pg_rate_limited');
const tfToString = require('../../../exchange_clients/binance/util/tf_to_string');

module.exports = async (symbol, tf) => {
  return dbRL(async db => {
    return db(`binance_candles_${tfToString(tf)}`).
    where('symbol', symbol).
    orderBy('mts', 'desc').
    first('*');
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy93b3JrZXJzL21hcmtldF9kYXRhX3N5bmMvYmluYW5jZS9nZXRfZmlyc3RfY2FuZGxlLmpzIl0sIm5hbWVzIjpbImRiUkwiLCJyZXF1aXJlIiwidGZUb1N0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiLCJzeW1ib2wiLCJ0ZiIsImRiIiwid2hlcmUiLCJvcmRlckJ5IiwiZmlyc3QiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLDZCQUFELENBQXBCO0FBQ0EsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscURBQUQsQ0FBMUI7O0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixPQUFPQyxNQUFQLEVBQWVDLEVBQWYsS0FBc0I7QUFDckMsU0FBT04sSUFBSSxDQUFDLE1BQU9PLEVBQVAsSUFBYztBQUN4QixXQUFPQSxFQUFFLENBQUUsbUJBQWtCTCxVQUFVLENBQUNJLEVBQUQsQ0FBSyxFQUFuQyxDQUFGO0FBQ0pFLElBQUFBLEtBREksQ0FDRSxRQURGLEVBQ1lILE1BRFo7QUFFSkksSUFBQUEsT0FGSSxDQUVJLEtBRkosRUFFVyxNQUZYO0FBR0pDLElBQUFBLEtBSEksQ0FHRSxHQUhGLENBQVA7QUFJRCxHQUxVLENBQVg7QUFNRCxDQVBEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGRiUkwgPSByZXF1aXJlKCcuLi8uLi8uLi9kYi9wZ19yYXRlX2xpbWl0ZWQnKVxuY29uc3QgdGZUb1N0cmluZyA9IHJlcXVpcmUoJy4uLy4uLy4uL2V4Y2hhbmdlX2NsaWVudHMvYmluYW5jZS91dGlsL3RmX3RvX3N0cmluZycpXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHN5bWJvbCwgdGYpID0+IHtcbiAgcmV0dXJuIGRiUkwoYXN5bmMgKGRiKSA9PiB7XG4gICAgcmV0dXJuIGRiKGBiaW5hbmNlX2NhbmRsZXNfJHt0ZlRvU3RyaW5nKHRmKX1gKVxuICAgICAgLndoZXJlKCdzeW1ib2wnLCBzeW1ib2wpXG4gICAgICAub3JkZXJCeSgnbXRzJywgJ2Rlc2MnKVxuICAgICAgLmZpcnN0KCcqJylcbiAgfSlcbn1cbiJdfQ==