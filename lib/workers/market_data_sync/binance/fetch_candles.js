'use strict';

const Binance = require('binance-api-node').default;
const PromiseThrottle = require('promise-throttle');

const FETCH_LIMIT = 1000;
const client = Binance();
const pt = new PromiseThrottle({
  requestsPerSecond: 100 / 60.0, // taken from docs (1200 per min weighted)
  promiseImplementation: Promise });


module.exports = async (symbol, tf, start) => {
  return pt.add(client.candles.bind(client, {
    symbol,
    interval: tf,
    limit: FETCH_LIMIT,
    startTime: start }));

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy93b3JrZXJzL21hcmtldF9kYXRhX3N5bmMvYmluYW5jZS9mZXRjaF9jYW5kbGVzLmpzIl0sIm5hbWVzIjpbIkJpbmFuY2UiLCJyZXF1aXJlIiwiZGVmYXVsdCIsIlByb21pc2VUaHJvdHRsZSIsIkZFVENIX0xJTUlUIiwiY2xpZW50IiwicHQiLCJyZXF1ZXN0c1BlclNlY29uZCIsInByb21pc2VJbXBsZW1lbnRhdGlvbiIsIlByb21pc2UiLCJtb2R1bGUiLCJleHBvcnRzIiwic3ltYm9sIiwidGYiLCJzdGFydCIsImFkZCIsImNhbmRsZXMiLCJiaW5kIiwiaW50ZXJ2YWwiLCJsaW1pdCIsInN0YXJ0VGltZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsa0JBQUQsQ0FBUCxDQUE0QkMsT0FBNUM7QUFDQSxNQUFNQyxlQUFlLEdBQUdGLE9BQU8sQ0FBQyxrQkFBRCxDQUEvQjs7QUFFQSxNQUFNRyxXQUFXLEdBQUcsSUFBcEI7QUFDQSxNQUFNQyxNQUFNLEdBQUdMLE9BQU8sRUFBdEI7QUFDQSxNQUFNTSxFQUFFLEdBQUcsSUFBSUgsZUFBSixDQUFvQjtBQUM3QkksRUFBQUEsaUJBQWlCLEVBQUUsTUFBTSxJQURJLEVBQ0U7QUFDL0JDLEVBQUFBLHFCQUFxQixFQUFFQyxPQUZNLEVBQXBCLENBQVg7OztBQUtBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsT0FBT0MsTUFBUCxFQUFlQyxFQUFmLEVBQW1CQyxLQUFuQixLQUE2QjtBQUM1QyxTQUFPUixFQUFFLENBQUNTLEdBQUgsQ0FBT1YsTUFBTSxDQUFDVyxPQUFQLENBQWVDLElBQWYsQ0FBb0JaLE1BQXBCLEVBQTRCO0FBQ3hDTyxJQUFBQSxNQUR3QztBQUV4Q00sSUFBQUEsUUFBUSxFQUFFTCxFQUY4QjtBQUd4Q00sSUFBQUEsS0FBSyxFQUFFZixXQUhpQztBQUl4Q2dCLElBQUFBLFNBQVMsRUFBRU4sS0FKNkIsRUFBNUIsQ0FBUCxDQUFQOztBQU1ELENBUEQiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgQmluYW5jZSA9IHJlcXVpcmUoJ2JpbmFuY2UtYXBpLW5vZGUnKS5kZWZhdWx0XG5jb25zdCBQcm9taXNlVGhyb3R0bGUgPSByZXF1aXJlKCdwcm9taXNlLXRocm90dGxlJylcblxuY29uc3QgRkVUQ0hfTElNSVQgPSAxMDAwXG5jb25zdCBjbGllbnQgPSBCaW5hbmNlKClcbmNvbnN0IHB0ID0gbmV3IFByb21pc2VUaHJvdHRsZSh7XG4gIHJlcXVlc3RzUGVyU2Vjb25kOiAxMDAgLyA2MC4wLCAvLyB0YWtlbiBmcm9tIGRvY3MgKDEyMDAgcGVyIG1pbiB3ZWlnaHRlZClcbiAgcHJvbWlzZUltcGxlbWVudGF0aW9uOiBQcm9taXNlXG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChzeW1ib2wsIHRmLCBzdGFydCkgPT4ge1xuICByZXR1cm4gcHQuYWRkKGNsaWVudC5jYW5kbGVzLmJpbmQoY2xpZW50LCB7XG4gICAgc3ltYm9sLFxuICAgIGludGVydmFsOiB0ZixcbiAgICBsaW1pdDogRkVUQ0hfTElNSVQsXG4gICAgc3RhcnRUaW1lOiBzdGFydFxuICB9KSlcbn1cbiJdfQ==