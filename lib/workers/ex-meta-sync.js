'use strict';

const debug = require('debug')('bfx:hf:server:db-exa-meta-sync');
const exchangeClients = require('../exchange_clients');
const sync = require('../sync_meta');

module.exports = syncIntervalMS => {
  sync(exchangeClients).then(() => {// initial sync
    setInterval(() => {
      sync(exchangeClients).catch(err => {// eslint-disable-line
        debug('error: %s', err.stack);
      });
    }, syncIntervalMS);

    return null;
  }).catch(err => {
    debug('error: %s', err.stack);
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy93b3JrZXJzL2V4LW1ldGEtc3luYy5qcyJdLCJuYW1lcyI6WyJkZWJ1ZyIsInJlcXVpcmUiLCJleGNoYW5nZUNsaWVudHMiLCJzeW5jIiwibW9kdWxlIiwiZXhwb3J0cyIsInN5bmNJbnRlcnZhbE1TIiwidGhlbiIsInNldEludGVydmFsIiwiY2F0Y2giLCJlcnIiLCJzdGFjayJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFQLENBQWlCLGdDQUFqQixDQUFkO0FBQ0EsTUFBTUMsZUFBZSxHQUFHRCxPQUFPLENBQUMscUJBQUQsQ0FBL0I7QUFDQSxNQUFNRSxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxjQUFELENBQXBCOztBQUVBRyxNQUFNLENBQUNDLE9BQVAsR0FBa0JDLGNBQUQsSUFBb0I7QUFDbkNILEVBQUFBLElBQUksQ0FBQ0QsZUFBRCxDQUFKLENBQXNCSyxJQUF0QixDQUEyQixNQUFNLENBQUU7QUFDakNDLElBQUFBLFdBQVcsQ0FBQyxNQUFNO0FBQ2hCTCxNQUFBQSxJQUFJLENBQUNELGVBQUQsQ0FBSixDQUFzQk8sS0FBdEIsQ0FBNkJDLEdBQUQsSUFBUyxDQUFFO0FBQ3JDVixRQUFBQSxLQUFLLENBQUMsV0FBRCxFQUFjVSxHQUFHLENBQUNDLEtBQWxCLENBQUw7QUFDRCxPQUZEO0FBR0QsS0FKVSxFQUlSTCxjQUpRLENBQVg7O0FBTUEsV0FBTyxJQUFQO0FBQ0QsR0FSRCxFQVFHRyxLQVJILENBUVVDLEdBQUQsSUFBUztBQUNoQlYsSUFBQUEsS0FBSyxDQUFDLFdBQUQsRUFBY1UsR0FBRyxDQUFDQyxLQUFsQixDQUFMO0FBQ0QsR0FWRDtBQVdELENBWkQiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY29uc3QgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdiZng6aGY6c2VydmVyOmRiLWV4YS1tZXRhLXN5bmMnKVxuY29uc3QgZXhjaGFuZ2VDbGllbnRzID0gcmVxdWlyZSgnLi4vZXhjaGFuZ2VfY2xpZW50cycpXG5jb25zdCBzeW5jID0gcmVxdWlyZSgnLi4vc3luY19tZXRhJylcblxubW9kdWxlLmV4cG9ydHMgPSAoc3luY0ludGVydmFsTVMpID0+IHtcbiAgc3luYyhleGNoYW5nZUNsaWVudHMpLnRoZW4oKCkgPT4geyAvLyBpbml0aWFsIHN5bmNcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzeW5jKGV4Y2hhbmdlQ2xpZW50cykuY2F0Y2goKGVycikgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIGRlYnVnKCdlcnJvcjogJXMnLCBlcnIuc3RhY2spXG4gICAgICB9KVxuICAgIH0sIHN5bmNJbnRlcnZhbE1TKVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGRlYnVnKCdlcnJvcjogJXMnLCBlcnIuc3RhY2spXG4gIH0pXG59XG4iXX0=