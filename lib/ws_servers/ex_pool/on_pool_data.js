'use strict';

const send = require('../../util/ws/send');

module.exports = (server, exID, chanID, data) => {
  const { clients } = server;

  let client;
  let subs;

  for (let i = 0; i < clients.length; i += 1) {
    client = clients[i];
    subs = client.subscriptions[exID];

    if (!subs) {
      continue;
    }

    if (Object.keys(subs).find(cid => +cid === chanID)) {
      send(client, ['data', exID, chanID, data]);
    }
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy93c19zZXJ2ZXJzL2V4X3Bvb2wvb25fcG9vbF9kYXRhLmpzIl0sIm5hbWVzIjpbInNlbmQiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInNlcnZlciIsImV4SUQiLCJjaGFuSUQiLCJkYXRhIiwiY2xpZW50cyIsImNsaWVudCIsInN1YnMiLCJpIiwibGVuZ3RoIiwic3Vic2NyaXB0aW9ucyIsIk9iamVjdCIsImtleXMiLCJmaW5kIiwiY2lkIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxvQkFBRCxDQUFwQjs7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLENBQUNDLE1BQUQsRUFBU0MsSUFBVCxFQUFlQyxNQUFmLEVBQXVCQyxJQUF2QixLQUFnQztBQUMvQyxRQUFNLEVBQUVDLE9BQUYsS0FBY0osTUFBcEI7O0FBRUEsTUFBSUssTUFBSjtBQUNBLE1BQUlDLElBQUo7O0FBRUEsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxPQUFPLENBQUNJLE1BQTVCLEVBQW9DRCxDQUFDLElBQUksQ0FBekMsRUFBNEM7QUFDMUNGLElBQUFBLE1BQU0sR0FBR0QsT0FBTyxDQUFDRyxDQUFELENBQWhCO0FBQ0FELElBQUFBLElBQUksR0FBR0QsTUFBTSxDQUFDSSxhQUFQLENBQXFCUixJQUFyQixDQUFQOztBQUVBLFFBQUksQ0FBQ0ssSUFBTCxFQUFXO0FBQ1Q7QUFDRDs7QUFFRCxRQUFJSSxNQUFNLENBQUNDLElBQVAsQ0FBWUwsSUFBWixFQUFrQk0sSUFBbEIsQ0FBdUJDLEdBQUcsSUFBSSxDQUFDQSxHQUFELEtBQVNYLE1BQXZDLENBQUosRUFBb0Q7QUFDbEROLE1BQUFBLElBQUksQ0FBQ1MsTUFBRCxFQUFTLENBQUMsTUFBRCxFQUFTSixJQUFULEVBQWVDLE1BQWYsRUFBdUJDLElBQXZCLENBQVQsQ0FBSjtBQUNEO0FBQ0Y7QUFDRixDQWxCRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBzZW5kID0gcmVxdWlyZSgnLi4vLi4vdXRpbC93cy9zZW5kJylcblxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBleElELCBjaGFuSUQsIGRhdGEpID0+IHtcbiAgY29uc3QgeyBjbGllbnRzIH0gPSBzZXJ2ZXJcblxuICBsZXQgY2xpZW50XG4gIGxldCBzdWJzXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGllbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgY2xpZW50ID0gY2xpZW50c1tpXVxuICAgIHN1YnMgPSBjbGllbnQuc3Vic2NyaXB0aW9uc1tleElEXVxuXG4gICAgaWYgKCFzdWJzKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhzdWJzKS5maW5kKGNpZCA9PiArY2lkID09PSBjaGFuSUQpKSB7XG4gICAgICBzZW5kKGNsaWVudCwgWydkYXRhJywgZXhJRCwgY2hhbklELCBkYXRhXSlcbiAgICB9XG4gIH1cbn1cbiJdfQ==